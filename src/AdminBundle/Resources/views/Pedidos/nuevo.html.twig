{% extends 'admin.html.twig' %}

{% block body %}
	<div class="container">
		<!-- bloque superior -->
		<div class="row">
			<div class="col-sm-12 col-md-6">
                <div class="row"><h4>{{ titulo }}</h4></div>
            </div>
			<div class="col-sm-12 col-md-6 text-right">
				<a href="{{ url('admin_pedido') }}" class="btn btn-system btn-per" data-toggle="tooltip" data-placement="bottom" title="Atras"><i class="material-icons">arrow_back</i></a>
			</div>
		</div>
		<!-- bloque superior fin-->
		<!-- contenido -->
		<div class="row">
			<div role="tab-block">
				<!-- Tabs Navigation -->
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class="active"><a href="#datos-pedido-tab" aria-controls="datos-pedido-tab" role="tab" data-toggle="tab">Datos Pedido</a></li>
                </ul>
				<!-- Tab Content Panes -->
				<div class="tab-content">
					<div role="tabpanel" class="tab-pane fade active in" id="datos-pedido-tab">
						<div class="admin-form theme-default theme-info">
							<div class="panel heading-border panel-default panel-info">
                    			<div class="panel-body bg-light">																				
									<div class="row">
										<div class="col-md-12">											
											<div class="input-group form-group col-sm-12 col-lg-3 pull-left">
												<span class="input-group-addon">Fecha Ingreso :</span>
												<input type="text" class="form-control" name="fechaIngreso" id="fechaIngreso" value="{{pedido.fechaIngreso is defined ? pedido.fechaIngreso|date("d/m/Y") : fecha|date("d/m/Y") }}" disabled>
											</div>
											<div class="input-group form-group col-sm-12 col-lg-3 pull-right">
												<span class="input-group-addon">Cot n° :</span>
												<input type="text" class="form-control" name="n_cot" id="n_cot" value="{{pedido.n_cot is defined ? pedido.n_cot}}" disabled>
											</div>
										</div>
									</div>
									{# Busqueda empresa y vista de codigo #}								
									{# collapse empresa#}
									<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
										<div class="section-divider mb40" role="tab" id="headingOne">
											<span>
												<a data-toggle="collapse" data-toggle="collapse" data-parent="#accordion" href="#collapseEmpresa" aria-expanded="true" aria-controls="headingOne">
													Datos Empresa
												</a>
											</span>
										</div>
										<div id="collapseEmpresa" class="{{data.id is not defined ? "panel-collapse collapse in ": "panel-collapse collapse "}}" role="tabpanel" aria-labelledby="headingOne">
											<div class="panel-body">
												<div class="row">
													<div class="form-group col-sm-12 col-lg-3">													
														<label class="field append-icon">
															<div class="dropdown">
																<input type="text" name="bsq_empre_pedido" id="bsq_empre_pedido" class="gui-input dropdown-toggle" data-toggle="dropdown" placeholder="Busqueda de empresa" {{data.id is defined ? "disabled" : " "}}>
																<ul id="lista_empre_cot" aria-labelledby="bsq_empre_pedido" class="dropdown-menu" role="menu"></ul>
															</div>
															<label for="bsq_empre_pedido" class="field-icon">
																	<i class="fa fa-search"></i>
															</label>
														</label>
													</div>
												</div><br>	
												<form id="form_datos_empresa" class="" action="{{ url('admin_pedido_guardar') }}" method="post" enctype="multipart/form-data" novalidate="novalidate">

													<input type="hidden" name="empre_id" id="empre_id" value="{{ data.id is defined ? data.id}}" >
													<div class="row">
														<div class="form-group col-sm-12 col-lg-3">
															<label class="field">
																<input type="text" placeholder="Nombre de fantas&iacute;a" name="empre_nombre" id="empre_nombre" class="gui-input" value="{{data.nombre is defined ? data.nombre}}" disabled>
															</label>
														</div>
														<div class="form-group col-sm-12 col-lg-3">
															<label class="field">
																<input type="text" placeholder="Razon Social" name="empre_razon_soc" id="empre_razon_soc" class="gui-input" value="{{data.rsocial is defined ? data.rsocial}}" disabled>
															</label>
														</div>
														<div class="form-group col-sm-12 col-md-3">
															<label class="field">
																<input type="text" placeholder="Rut / Run" name="empre_rut" id="empre_rut" class="gui-input val_num" value="{{data.rut is defined ? data.rut}}" disabled>
															</label>
														</div>
													</div>
													<div class="row">
														<div class="form-group col-sm-12 col-md-2">
															<label class="field">
																<input type="text" placeholder="Comuna" name="empre_comuna" id="empre_comuna" class="gui-input" value="{{data.comuna is defined ? data.comuna}}" disabled>
															</label>
														</div>
														<div class="form-group col-sm-12 col-md-2">
															<label class="field">
																<input type="text" placeholder="Provincia" name="empre_provincia" id="empre_provincia" class="gui-input" value="{{data.provincia is defined ? data.provincia}}" disabled>
															</label>
														</div>
														<div class="form-group col-sm-12 col-md-2">
															<label class="field">
																<input type="text" placeholder="Region" name="empre_region" id="empre_region" class="gui-input" value="{{data.region is defined ? data.region}}" disabled>
															</label>
														</div>
														<div class="form-group col-sm-12 col-md-2">
															<label class="field">
																<input type="text" placeholder="Calle" name="empre_calle" id="empre_calle" class="gui-input" value="{{data.dir_calle is defined ? data.dir_calle}}" disabled>
															</label>
														</div>
														<div class="form-group col-sm-12 col-md-2">
															<label class="field">
																<input type="text" placeholder="Numero" name="empre_nume" id="empre_nume" class="gui-input val_num" value="{{data.dir_numero is defined ? data.dir_numero}}" disabled>
															</label>
														</div>
														<div class="form-group col-sm-12 col-md-2">
															<label class="field">
																<input type="text" placeholder="Villa / Poblacion" name="empre_villa_pobl" id="empre_villa_pobl" class="gui-input" value="{{data.dir_villa_pobl is defined ? data.dir_villa_pobl}}" disabled>
															</label>
														</div>
														<div class="form-group col-sm-12 col-md-2">
															<label class="field">
																<input type="text" placeholder="N° Departamento" name="empre_num_dpto" id="empre_num_dpto" class="gui-input val_num" value="{{data.dir_numero_depto is defined ? data.dir_numero_depto}}" disabled>
															</label>
														</div>
														<div class="form-group col-sm-12 col-md-2">
															<label class="field">
																<input type="text" placeholder="Piso dpto." name="empre_dpto_piso" id="empre_dpto_piso" class="gui-input val_num" value="{{data.dir_numero_piso is defined ? data.dir_numero_piso}}" disabled>
															</label>
														</div>
													</div>
													<div class="row">
														<div class="form-group col-sm-12 col-md-2">
															<label class="field">
																<input type="text" placeholder="Telefono" name="empre_telefono" id="empre_telefono" class="gui-input val_num" value="{{data.telefono is defined ? data.telefono}}" disabled>
															</label>
														</div>
														<div class="form-group col-sm-12 col-md-2">
															<label class="field">
																<input type="text" placeholder="Celular" name="empre_celular" id="empre_celular" class="gui-input val_num" value="{{data.celular is defined ? data.celular}}" disabled>
															</label>
														</div>
														<div class="form-group col-sm-12 col-md-2">
															<label class="field">
																<input type="email" placeholder="Email" name="empre_mail" id="empre_mail" class="gui-input" value="{{data.email is defined ? data.email}}" disabled>
															</label>
														</div>
													</div>
												<form>
											
											</div>
										</div>
									</div>
									{# collapse contacto#}
									<div class="row" id="contacto" style={{data.id is not defined ? "display:none;" : " "}}>
										<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
											<div class="section-divider mb40" role="tab" id="headingTwo">
												<span>
													<a data-toggle="collapse" data-toggle="collapse" data-parent="#accordion" href="#collapseContacto" aria-expanded="true" aria-controls="headingTwo">
														Contacto Asociado a Pedido
													</a>
												</span>
											</div>
											<div id="collapseContacto" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
												<div class="panel-body">
													<div class="form-group col-sm-12 col-lg-6">
														<label class="field">
															Contactos asociados a la empresa seleccionada
														</label>
														<label class="field select">
															<select id="lista_contactos_cot" name="lista_contactos_cot" class="form-control" required>
																<option value="">Seleccione</option>
																{% for contacto in lista_contactos %}
																	<option id="seleccion" {{(pedido.id_contacto == contacto.fkContacto.id)? 'selected'}} name="seleccion" value={{contacto.fkContacto.id}}>{{(contacto.fkContacto.run != '') ? contacto.fkContacto.run : ''}} {{contacto.fkContacto.primerNombre }} {{contacto.fkContacto.apellidoPaterno}} {{contacto.fkContacto.apellidoMaterno}}</option>
																{% endfor %}
															</select>
															<i class="arrow"></i>
														</label>
													</div>
													{# ModalContacto #}
													<div class="form-group col-sm-6">
														<button id="modalIngresoContacto" style ="margin-top:18px;" type="button"  class="btn btn-primary btn-lg" data-target="#myModalContacto">
															Ingresar Contacto
														</button>
														<!-- Modal Creacion de Contacto -->
														<div class="modal fade bs-example-modal-lg" id="myModalContacto" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="overflow-y: scroll;">
															<div class="modal-dialog modal-lg">
																<div class="modal-content">
																	<div class="modal-header">
																		<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
																		<h5 class="header2"><i class="material-icons">person_add</i> Nuevo Contacto</h5>
																	</div>
																	<div class="modal-body">
																		<div class="panel">
																			<div class="panel-body bg-light">
																				<h5 class="header2"><i class="material-icons" style="vertical-align: bottom;">create</i> Ingreso de datos</h5>
																				<div class="row">
																					<form id="form_nuevo_cliente" class="admin-form" action="{{ url('admin_contacto_guardar') }}" method="post" enctype="multipart/form-data">
																						<input type="hidden" name="id_contacto" id="id_contacto" value="" >
																						<div class="col-md-12 ">
																							<div class="row">
																								<div class="form-group col-md-3">                                           
																									<label class="field">
																										Run
																										<input type="text" name="contacto_run" id="contacto_run" class="gui-input">
																									</label>
																								</div>                                           
																							</div>
																						</div>
																						<div class="col-md-6 col-lg-6">
																							<div class="row">
																								<div class="form-group col-md-6">
																									<label class="field">
																										Primer Nombre
																										<input type="text" pattern="[a-z]{1,15}" name="contacto_pri_nomb" id="contacto_pri_nomb" class="gui-input">
																									</label>
																								</div>
																								<div class="form-group col-md-6">
																									<label class="field">
																										Segundo Nombre
																										<input type="text" name="contacto_seg_nomb" id="contacto_seg_nomb" class="gui-input">
																									</label>
																								</div>
																							</div>
																						</div>
																						<div class="col-md-6 col-lg-6">
																							<div class="row">
																								<div class="form-group col-md-6">
																									<label class="field">
																										Apellido Paterno
																										<input type="text" name="contacto_ape_pate" id="contacto_ape_pate" class="gui-input">
																									</label>
																								</div>
																								<div class="form-group col-md-6">
																									<label class="field">
																										Apellido Materno
																										<input type="text" name="contacto_ape_mate" id="contacto_ape_mate" class="gui-input">
																									</label>
																								</div>
																							</div>
																						</div>
																						<div class="col-md-6 col-lg-6">
																							<div class="row">
																								<div class="form-group col-sm-12 col-lg-6">
																									<label class="field">
																										Email
																										<input type="text" name="contacto_email" id="contacto_email" class="gui-input">
																									</label>
																								</div>
																								<div class="form-group col-sm-12 col-lg-6">
																									<label class="field">			
																										Tel&eacute;fono
																										<input type="tel" name="contacto_fono" id="contacto_fono" class="gui-input val_num" >
																									</label>
																								</div>
																							</div>
																						</div>
																						<div class="form-group col-sm-12 col-md-3">
																							<label class="field">
																								Cargo
																							</label>
																							<label class="field select">
																								<select id="cargos" name="cargos" class="form-control" required>
																									<option value="">Seleccione</option>
																									{#% for lista_cargos in lista_cargos %}
																										<option id="seleccion_contacto" name="seleccion_contacto" value={{lista_cargos.id}}>{{lista_cargos.nombre}}</option>
																									{% endfor %#}
																								</select>
																								<i class="arrow"></i>
																							</label>
																						</div>
																						<div class="form-group col-sm-12 col-md-3">
																							<!-- Button trigger modal -->
																							<button style="margin-top: 17px;" id="btnShowModalCargo" type="button" class="btn btn-primary btn-lg"  data-target="#myModalCargo">
																								Crear Cargo
																							</button>
																						</div>
																						<div class="form-group col-sm-12">
																							<label class="field">Observaciones</label>
																							<label class="field prepend-icon">
																								<textarea class="gui-textarea" id="contacto_obs" name="contacto_obs"></textarea>
																								<label for="contacto_obs" class="field-icon"><i class="fa fa-comments"></i></label>
																							</label>
																						</div>																	
																						<!-- imagen -->
																						<div class="input-field col-sm-3">
																							<label class="field">Adjuntar imagen</label>
																							<label class="field prepend-icon append-button file">
																								<span class="button btn-primary">Elija un archivo</span>
																								<input type="file" class="gui-file" name="contacto_img" id="contacto_img" onChange="document.getElementById('uploader1').value = this.value;">
																								<input type="text" class="gui-input" id="uploader1" name="uploader1">
																								<label class="field-icon"><i class="fa fa-upload"></i></label>
																							</label>
																						</div>
																					</form>
																					{# Modal form cargo. Form fuera de principal por problemas entre formularios #}
																					<!--Modal-->
																					<div class="modal fade" id="myModalCargo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
																						<div class="modal-dialog">
																							<div class="modal-content">
																								<div class="modal-header">
																									<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
																									<h4 class="modal-title" id="myModalLabel">Ingreso de Categoria</h4>
																								</div>
																								<div class="modal-body">
																									<div class="panel">
																										<div class="panel-body bg-light"> 
																											<h5><i class="material-icons" style="vertical-align: bottom;">create</i> Ingreso de datos</h5>
																											<form id="form-new-cargo" name="form-new-cargo" class="" action="{{ url('admin_cargo_guardar') }}" method="post" enctype="multipart/form-data" novalidate="novalidate">
																												<div class="row">
																													<div class="form-group col-lg-6">
																														<label class="field">
																															Nombre
																															<input type="text" name="cargo_nombre" id="cargo_nombre" class="gui-input">
																														</label>
																													</div>                                                                    
																												</div>
																												<div class="row">
																													<div class="form-group col-sm-12">
																														<label class="field">Observaciones</label>
																														<label class="field prepend-icon">
																														<textarea class="gui-textarea" id="cat_obs" name="cat_obs"></textarea>
																														<label for="cat_obs" class="field-icon"><i class="fa fa-comments"></i></label>
																														</label>
																													</div>
																												</div>
																											</form>
																										</div>
																									</div>
																									<div class="modal-footer">
																										<button id="btnModalGuardarCargo" type="button" class="btn btn-primary">Guardar</button>
																										<button id="btnModalCerrarCargo"type="button" class="btn btn-default" >Cerrar</button>
																									</div> 
																								</div>                                                                                                                                                                                  
																							</div>
																						</div>
																					</div><!--Fin Modal-->
																				</div>
																			</div><!--Panel de ingreso cliente-->
																		</div>
																		<div class="modal-footer">
																			<button id="btnGuardarContacto" type="button" class="btn btn-primary">Guardar</button>
																			<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
																		</div>
																	</div>
																</div>
															</div>
														</div><!--FinModal-->
													</div>
												</div>
											</div>
										</div>											
									</div>								
									{# Ingreso de productos#}
									<div  id="prod_empresa" class="row" style={{data.id is not defined ? "display:none;" : " "}}>
										<div class="section-divider mb40" >
											<span>Ingreso de productos  / servicios</span>											
										</div>
										<div class="form-group col-sm-6 " > 
											<h5><i class="material-icons" style="vertical-align: bottom;">domain</i> Agregar Producto / Servicio</h5>
											<label class="field append-icon">
												<div class="dropdown">
													<input  type="text" id="bsq_producto" name="buscar" class="form-control dropdown-toggle" data-toggle="dropdown">
													<ul id="lista_producto" aria-labelledby="bsq_producto" class="dropdown-menu" role="menu" data-cont="{{ data.id is defined ? data.id}}"></ul>
												</div>
												<label for="bsq_producto" class="field-icon">
													<i class="fa fa-search"></i>
												</label>
											</label>														
										</div>
										<div class="form-group col-sm-6">
											<!-- Button trigger modal Producto -->											
											<button id="modalIngresoProducto" style ="margin-top:42px;" type="button"  class="btn btn-primary btn-lg" data-target="#modalProducto">
												Ingresar Producto
											</button>												
										</div>
									</div>
									{# listado de productos seleccionados #}										
									<!-- tabla -->
									<div class="row">
										<div class="section-divider mb40">
											<span>Listado de productos / servicios</span>
										</div>
										<div class="col-md-10 col-md-offset-1">
											<!-- bloque busqueda / filtros -->
											<!-- bloque busqueda / filtros fin-->
											<!-- bloque tabla -->
											<div class="table-responsive">
												<table class="table table-striped table-hover table-responsive" id="dT_pedido">
													<thead>
														<tr>
															<th>#</th>
															<th>Producto</th>
															<th>Valor Uni.</th>
															<th>Cantidad</th>
															<th>Valor Cotizacion</th>
															<th class="text-right">Total P/P</th>
															<th class="text-right">Estado</th>
														</tr>
													</thead>
													<tbody>
													</tbody>
												</table>
											</div>
										</div>
									</div>
									{# </form> empresa inicial #}
									<!--Modal ingreso de Producto a cotizar-->
									<div class="modal fade" id="modalProducto" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
										<div class="modal-dialog">
											<div class="modal-content">
												<div class="modal-header">
													<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
													<h4 class="modal-title" id="myModalLabel">Ingreso de Producto a Cotizar</h4>
												</div>
												<div class="modal-body">
													<div class="panel">
														<div class="panel-body bg-light"> 
															<h5><i class="material-icons" style="vertical-align: bottom;">create</i> Ingreso de datos</h5>
															<form id="form_cotizar_producto" name="form_cotizar_producto" class="" action="{{ url('admin_guardar_producto_cotizar') }}" method="post" enctype="multipart/form-data" novalidate="novalidate">
																<input type="hidden" name="id_prod_cot" id="id_prod_cot">
																<div class="row">
																	<div class="form-group col-lg-6">
																		<label class="field">
																			Nombre
																			<input type="text" name="prod_nombre" id="prod_nombre" class="gui-input">
																		</label>
																	</div>                                                                    
																</div>
																<div class="row">
																	<div class="form-group col-sm-12">
																		<label class="field">Observaciones</label>
																		<label class="field prepend-icon">
																		<textarea class="gui-textarea" id="prod_obs" name="prod_obs"></textarea>
																		<label for="prod_obs" class="field-icon"><i class="fa fa-comments"></i></label>
																		</label>
																	</div>
																</div>
															</form>
														</div>
													</div>
													<div class="modal-footer">
														<button id="btnModalGuardarProductoCotizacion" type="button" class="btn btn-primary">Guardar</button>
														<button type="button" class="btn btn-default" data-dismiss="modal" >Cerrar</button>
													</div> 
												</div>                                                                                                                                                                                  
											</div>
										</div>
									</div><!--Fin Modal-->									
									<!-- Modal Opciones Producto-->
									<div class="modal fade bs-example-modal-lg" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel2" aria-hidden="true" style="overflow-y: scroll;">
										<div class="modal-dialog modal-lg">
											<div class="modal-content">
												<div class="modal-header">
													<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
														<h4 class="header2"><i class="material-icons">mode_edit</i>Actualizacion datos de producto</h4>
												</div>
												<div class="modal-body">
													<div class="panel">
														<div class="panel-body bg-light">
															<h4 class="header2"><i class="material-icons" style="vertical-align: bottom;">create</i> Ingreso de datos opcionales</h4>	
															<div class="section-divider mb40">
																<span></span>
															</div>
															{# form de ingreso de opcion #}
															{# <form id="op" class="modalForm2" action="" method="post" enctype="multipart/form-data"> #}
																<input type="hidden" name="detalle" id="detalle" value="{{ data.id is defined ? data.id}}" >
																<div class="row">
																	<div class="col-md-6 col-lg-12">
																		<div class="form-group col-sm-12">
																			<label class="field">Observaciones</label>
																			<label class="field prepend-icon">
																				<textarea class="gui-textarea" id="obs" name="obs"></textarea>
																				<label for="obs" class="field-icon"><i class="fa fa-comments"></i></label>
																			</label>
																		</div>
																	</div>
																</div>
																<div class="row">
																	<div class="form-group col-sm-12 col-md-6 col-md-offset-1">
																		<label class="field">
																			Opciones producto
																		</label>
																		<label class="field select">
																			<select id="opciones" name="opciones" class="form-control" required>
																				<option value="0" selected>Seleccione</option>
																			</select>
																			<i class="arrow"></i>
																		</label>																																																			
																	</div>	
																	<div class="form-group col-sm-12 col-md-4">
																		<!-- Button trigger modal -->
																		<button id="botonMoldal3"  style ="margin-top:17px;" type="button" class="btn btn-primary btn-lg"  data-target="#myModal3">
																			Agregar Nueva Opcion
																		</button>
																		<!-- Modal Creacion de Opcion-->
																		<div class="modal fade" id="myModal3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel3" aria-hidden="true"  >
																			<div class="modal-dialog">
																				<div class="modal-content">
																					<div class="modal-header">
																						<h4 class="modal-title" id="myModalLabel3">Creacion de Opcion</h4>
																					</div>
																					<div class="modal-body">
																						<div class="panel">
																							<div class="panel-body bg-light">
																								<form id="form-new-opcion" name="form-new-opcion" class=""  action="{{ url('admin_opcion_guardar') }}" method="post" enctype="multipart/form-data" novalidate="novalidate">
																									<h5 class="header2"><i class="material-icons" style="vertical-align: bottom;">create</i> Ingreso de datos</h5>
																									<div class="row">
																										<div class="col-md-12">
																											<div class="row">
																												<div class="form-group col-md-6">
																													<label class="field">
																														Nombre
																														<input type="text" name="opcion_nombre" id="opcion_nombre" class="gui-input" >
																													</label>
																												</div>
																												<div class="form-group col-md-6">
																													<label class="field">
																														Valor
																														<div class="input-group">
																															<div class="input-group-addon">$</div>
																															<input type="number" min="1" name="opcion_valor" id="opcion_valor" class="gui-input">{# clase form-control#}
																														</div>
																													</label>
																												</div>
																											</div>
																											<div class="row">
																												<div class="form-group col-md-12">
																													<h4>Seleccione alternativa </h4> 
																													<div class="form-group col-md-6">
																														<label><input type="radio" name="unidad" id="unidad1" value="1"> Medida</label><br>
																														<label><input type="radio" name="unidad" id="unidad2" value="2"> Peso</label><br>
																														<label><input  type="radio" name="unidad" id="unidad3"value="3" checked> Unidad</label>																															
																													</div>
																													<div id="opcionSelect" class="form-group col-md-6" style="display:none">                                              
																														<label class="field">
																															Unidad
																														</label>
																														<label class="field select">
																															<select id="opcion_unidades" name="opcion_unidades" class="form-control">
																																<option value="">Seleccione unidad</option>																																	
																															</select>
																															<i class="arrow"></i>
																														</label>
																													</div>																																
																												</div>
																											</div>  																																
																										</div>
																										<div class="form-group col-md-6 col-md-offset-1">                                              
																											<label class="field">
																												Categoria Opcion
																											</label>
																											<label class="field select">
																												<select id="opcion_categorias" name="opcion_categorias" class="form-control">
																													<option value="" >Seleccione</option>																																	
																												</select>
																												<i class="arrow"></i>
																											</label>
																										</div>
																										<div class="form-group col-sm-12">
																											<label class="field">Observaciones</label>
																												<label class="field prepend-icon">
																													<textarea class="gui-textarea" id="opcion_obs" name="opcion_obs"></textarea>
																													<label for="opcion_obs" class="field-icon"><i class="fa fa-comments"></i></label>                                            
																												</label>
																											</div>	
																											<!-- imagen ingreso-->
																											<div class="col-md-12">
																												<div class="input-field col-md-6">
																													<label class="field prepend-icon append-button file">
																														<span class="button btn-primary">Elija un archivo</span>
																														<input type="file" class="gui-file" name="cat_imagen" id="cat_imagen" onChange="document.getElementById('upload_prod_i').value = this.value;">
																														<input type="text" class="gui-input" id="upload_prod_i" name="upload_prod_i">
																														<label class="field-icon"><i class="fa fa-upload"></i></label>
																													</label>
																												</div>
																											</div>
																										</div>
																									</div>
																								</form>
																							</div>
																							<div class="modal-footer">
																								<button id="botonGuardarModal3" type="button" class="btn btn-primary">Guardar Opcion</button>
																								<button id="botonCancelarModal3" type="button" class="btn btn-default" >Close</button>
																							</div>
																						</div>
																					</div><!--ojo coneste si se desordena -->
																				</div>
																			</div>
																		</div><!--Fin Modal-->
																	</div>		
																	<div id="viewOpciones" class="row" style="display:none">
																		<div class="col-md-12">	
																			<div class="col-md-6 col-md-offset-1">
																				<div id="divLargo" class="form-group col-md-3" style="display:none">
																					<label class="field">
																						Largo
																						<input type="number" min="1"  name="largo" id="dimensiones" class="gui-input" value="" onchange="actualizaValor()">
																					</label>
																				</div>
																				<div id="divAncho" class="form-group col-md-3" style="display:none">
																					<label class="field">
																						Ancho
																						<input type="number" min="1" name="ancho" id="dimensiones" class="gui-input" value="" onchange="actualizaValor()">
																					</label>
																				</div>
																				<div  id="divPeso" class="form-group col-md-3" style="display:none">
																					<label class="field">
																						Peso
																							<input type="number" min="1"name="peso" id="peso"  class="gui-input" value=""  onchange="actualizaValor()">
																					</label>
																				</div>
																			</div>
																			<div id="divCalculos" class="form-group col-md-5" style="display:none"></div>	
																			<div class="col-md-4 col-md-offset-5">
																				<button  id="boton-guardar-opcion-dimensiones" disabled="true" type="button" class="btn btn-primary">Guardar</button>
																			</div>
																		</div>
																	</div>
																	<div class="row">
																		<div class="col-md-12 col-lg-12">
																			<h4><i class="material-icons">playlist_add_check</i> Detalle de Producto</h4>
																			<div class="section-divider mb40"><span></span></div>
																			<div class="row col-md-offset-1">
																				<h4>Opciones Seleccionadas</h4>
																				<div id="click_opcion" class="click_opcion col-md-offset-1 ">
																				</div>
																			</div>																			
																		</div>
																		<div class="col-md-12 col-md-offset-1">
																			<h4>Valores</h4>
																			<div class="col-md-2 col-md-offset-1 ">
																				<label class="field">
																					Cantidad:
																					<input type="number" min="1" name="cantidad"  class="gui-input" id="" onchange="myFunction(this.value, this.id)" >
																				</label>
																			</div>																			
																			<div class="col-md-2">
																				<label class="field">
																					Modificado:
																					<input type="number" min="1" name="valor_m"  class="gui-input" onchange="myFunctionValCotizacion(this.value, this.id)" {{(is_granted('ROLE_ADMIN_C'))? '': ((is_granted('ROLE_VENTA_B'))? '' : 'disabled')}}>
																				</label>
																			</div>																																						
																			<div class="col-md-2">
																				<label class="field">
																					Opciones:
																					<input type="text" name="valor_o" id="valor_o" class="gui-input" disabled="true">
																				</label>
																			</div>																			
																			<div class="col-md-2">
																				<label class="field">
																					Total:
																					<input type="text" name="valor" id="valor" class="gui-input" disabled="true">
																				</label>
																			</div>
																		</div>
																	</div>
																</div>
															{# </form> #}
														</div>
													</div>
													<div class="modal-footer">
														<div class="col-sm-12 text-right">
															<button id="botonGuardarModal2" type="button" class="btn btn-primary">Guardar Cambios</button>
															<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
														</div>
													</div>
												</div>
											</div> 
										</div>
									</div>
									{# datos de pedido #}
									<div class="row" id="datosPedido" style={{data.id is not defined ? "display:none;" : ""}}>
										<div class="section-divider mb40">
											<span>Datos Pedido</span>
										</div>
										{# <div class="panel"> #}
										<div class="panel-body">
											<form id="form_new_pedido" name="form_new_pedido" class="" action="{{ url('admin_pedido_guardar') }}" method="post" enctype="multipart/form-data" novalidate="novalidate">
												<div class="row">
													<div class="col-md-10 col-sm-offset-1">
														<div class="row">
															<div class="input-group form-group col-sm-12 col-lg-3 pull-left">
																<span class="input-group-addon">Ultima modificacion :</span>
																<input type="text" class="form-control" name="fechaModificacion" id="fechaModificacion" value="{{pedido.fechaModificacion is defined ? pedido.fechaModificacion|date("d/m/Y") : "Sin Modificar"}}" disabled>
															</div>
														</div>
														<div class="row">
															<div class="input-group form-group col-sm-12 col-lg-3 pull-left">
																<span class="input-group-addon">E. Pedido:</span>
																<input type="text" class="form-control" name="pedido_etapa" id="pedido_etapa" value="{{pedido.etapa is defined ? pedido.etapa.nombre : "INCONSISTENTE"}}" disabled>
															</div>
														</div>
														<div class="row" style="{{data.id is not defined ? "display:none;" : ""}}">
															<div class="input-group  col-sm-12 col-lg-3 pull-left ">
																	<span class="input-group-addon">E. Negociacion:</span>
																	<input id="estadoNegociacion" name="estadoNegociacion" type="text" class="form-control"   value="{{pedido.estadoProceso is defined ? pedido.estadoProceso.sigla : "INCONSISTENTE"}}" disabled>
															</div>																
															<div class="input-group form-group col-lg-5 col-sm-offset-4">
																<div class="input-group">
																	<span class="input-group-addon">Cambiar Estado</span>
																	<label class="field select">
																		<select id="newEstadoNegociacion" name="newEstadoNegociacion" class="form-control" required {{(is_granted('ROLE_VENTA_B'))? 'disabled' : ((is_granted('ROLE_ADMIN_C'))? '': ((pedido.estadoProceso.id == 1 )? 'disabled':''))}}>
																			<option value="">Seleccione</option>
																			{% for etapa in lista_etapa_negociacion %}
																				<option id="seleccion" {{(pedido.estadoProceso.id == etapa.id)? 'selected'}} name="seleccion" value={{etapa.id}}>{{etapa.sigla }}, {{etapa.nombre}} </option>
																			{% endfor %}
																		</select>
																		<i class="arrow"></i>
																	</label>
																</div>
															</div>
														</div><br>
													</div>
												</div>
												<div class="col-sm-12 col-sm-offset-3">
													<input type="hidden" name="ped_id" id="ped_id" value="{{ pedido.id is defined ?  pedido.id }}" >
													<div class="row">
														<div class="form-group col-sm-12 col-lg-2">
															<label class="field">
																Total S/D
																<div class="input-group form-group col-sm-12 col-lg-2">
																	<span class="input-group-addon">$</span>
																	<input style="width:120px;text-align:left;" type="text" name="total_ped" id="total_ped" class="gui-input val_num" value="{{ pedido.total is defined ? pedido.total : 0 }}" disabled>
																</div>
															</label>
														</div>
														<div class="form-group col-sm-12 col-lg-2">
															<label class="field">
																Descuento
																<div class="input-group form-group col-sm-12 col-lg-2">
																	<input style="width:120px;text-align:right;" type="text" class="gui-input val_num" name="descuento" id="descuento" 
																		value="{{ pedido.descuento is defined ?   pedido.descuento }}" onchange="actualizaDescuento(this.value)" {{(is_granted('ROLE_ADMIN_C'))? '': ((pedido.etapa.id is defined)? (pedido.etapa.id != 6)?'disabled')}}>
																	<span class="input-group-addon">%</span>
																</div>
															</label>
														</div>
														<div class="form-group col-sm-12 col-lg-2">
															<label class="field">
																Monto Descuento
																<div class="input-group form-group col-sm-12 col-lg-2">
																	<span class="input-group-addon">$</span>
																	<input style="width:120px;text-align:left;" type="text" name="montoDescuento" id="montoDescuento" class="gui-input val_num" value="{{ pedido.montoDescuento is defined ?   pedido.montoDescuento : 0 }}" disabled>
																</div>
															</label>
														</div>
													</div>
													<div class="row">
														<div class="form-group col-sm-12 col-lg-2">
															<label class="field">
																Total Neto C/D
																<div class="input-group form-group col-sm-12 col-lg-2">
																	<span class="input-group-addon">$</span>
																	<input style="width:120px;text-align:left;" type="text" class="gui-input val_num" name="valorNetoCD" id="valorNetoCD" value="{{ pedido.valorNeto is defined ?   pedido.valorNeto : 0 }}" disabled>
																</div>
															</label>
														</div>														
														<div class="form-group col-sm-12 col-lg-2">
															<label class="field">
																IVA Actual																		
															</label>
															<div class="input-group form-group col-sm-12 col-lg-2">
																<input style="width:120px;text-align:right;" type="text" class="gui-input" name="ivaActual" id="ivaActual" value="{{pedido.ivaActual is defined ? pedido.ivaActual : "19"}}" disabled>
																<span class="input-group-addon">%</span>
															</div>
														</div>
														<div class="form-group col-sm-12 col-lg-2">
															<label class="field">
																Total Imponible
																<div class="input-group form-group col-sm-12 col-lg-2">
																	<span class="input-group-addon">$</span>
																	<input style="width:120px;text-align:left;" type="text" name="totalImp" id="totalImp" class="gui-input val_num" value="{{ pedido.totalImp is defined ? pedido.totalImp : 0}}" disabled>
																</div>
															</label>
														</div>
													</div>
													<div class="row">
														<div class="form-group col-sm-6 ">
															<div class="form-group ">
																<label class="field">
																	Observaciones
																</label>
																<label class="field prepend-icon">
																	<textarea class="gui-textarea" id="ped_obs" name="ped_obs">{{ pedido.obs is defined ? pedido.obs}}</textarea>
																	<label for="ped_obs" class="field-icon"><i class="fa fa-comments"></i></label>
																</label>
															</div>
														</div>
													</div>
												</div>
											</form>
										</div>
										{# </div> #}
									</div>										
                        		</div>
                        		<div class="panel-footer text-right">
                        			<button id="btnGuardarPedido" {{data.id is not defined ? 'disabled="true"' : ""}}  class="btn btn-success ">Guardar <i class="fa fa-save"></i></button>
                        			<button id="btnCancearPedido" class="btn btn-warning ">Cancelar <i class="fa fa-ban"></i></button>
                        		</div>
                        	</div>
                        </div>
					</div>
                </div>
			</div>
		</div>
		<!-- contenido fin-->
	</div>
{% endblock %}

{% block javascripts %}	
	<script src="{{ absolute_url(asset('assets/js/module/pedido/nuevo.js')) }}"></script>
{% endblock %}